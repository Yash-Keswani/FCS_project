{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <title>Profile</title>
</head>
<body>
<h2 class="text-center">{{ object.full_name }}</h2>
<p>About Us: {{ object.bio }}</p>
    <div>
    <button type="button" onclick ="fetch_documents()" >Fetch Documents</button>
    <div>

        <div id="id_documents">

        </div>
        <script>
            function fetch_documents(){
                const user_id = '{{ user.id }}';
                fetch("/medimode/user_documents", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                            'X-CSRFToken': '{{ csrf_token }}'
                    },
                    redirect: 'manual',
                    body: JSON.stringify({"profile_id": user_id, "csrf_token": '{{ csrf_token }}'})
                }).then((response) => response.json()).then((data) => {
                let toput = ""
                data.forEach((doc) => {
                    toput += doc["key"]+": <a target='_blank' href=/medimode/media/verify/"+doc["filepath"]+">"+doc["filename"]+"</a><br/>"
                })
                document.getElementById("id_documents").innerHTML=toput
                    })
            }
        </script>
        
    
</body>
</html>